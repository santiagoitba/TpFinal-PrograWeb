<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>EZMoney | Cripto</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <h1>Criptomonedas</h1>
    <a href="index.html">← Volver a EZMoney</a>
  </header>

  <main>
    <p>En esta sección vas a aprender todo sobre wallets, exchanges, y cómo empezar en el mundo cripto.</p>
    
    <section class="curso-info">
      <div class="curso-imagen">
        <img src="fotos/inicialcripto.jpeg" alt="Curso de Criptomonedas">
      </div>
      
      <div class="curso-descripcion">
        <h2>¿Qué vas a aprender?</h2>
        <p>Aprende desde cero el mundo de las criptomonedas. Te enseñamos a crear wallets seguras, usar exchanges, invertir de forma inteligente y generar ingresos pasivos con DeFi y staking.</p>
        
        <ul>
          <li>Creación y manejo de wallets</li>
          <li>Compra y venta en exchanges</li>
          <li>Análisis de proyectos crypto</li>
          <li>Estrategias de inversión</li>
          <li>DeFi y staking</li>
        </ul>
      </div>
    </section>

    <section class="profesionales">
      <h2>Nuestros instructores</h2>
      <div class="profesionales-grid">
        <div class="profesor-card">
          <img src="fotos/cripto1.jpg" alt="Juan Pérez">
          <h3>Juan Pérez</h3>
          <p>Trader profesional con 5 años de experiencia en crypto. Especialista en análisis técnico.</p>
        </div>
        
        <div class="profesor-card">
          <img src="fotos/cripto2.jpeg" alt="María González">
          <h3>María González</h3>
          <p>Experta en DeFi y blockchain. Fundadora de 3 proyectos crypto exitosos.</p>
        </div>
      </div>
    </section>

    <!-- NUEVA SECCIÓN: Cursos de la comunidad -->
    <section class="cursos-comunidad">
      <h2>Cursos de la comunidad</h2>
      <p>Estos son cursos creados por nuestra comunidad de expertos en criptomonedas.</p>
      
      <div id="cursos-comunidad-lista" class="profesionales-grid">
        <!-- Aquí se mostrarán los cursos creados por usuarios -->
        <p id="no-cursos-msg">Aún no hay cursos creados por la comunidad. ¡Sé el primero en crear uno!</p>
      </div>
      
      <div class="crear-curso-btn">
        <button class="tema-btn" id="mostrar-form-curso">Crear tu propio curso</button>
      </div>
    </section>

    <!-- Formulario para crear curso (oculto por defecto) -->
    <section id="form-crear-curso" class="form-crear-curso" style="display: none;">
      <h2>Crear un nuevo curso</h2>
      <form id="nuevo-curso-form">
        <div class="form-group">
          <label for="curso-titulo">Título del curso:</label>
          <input type="text" id="curso-titulo" required>
        </div>
        
        <div class="form-group">
          <label for="curso-descripcion">Descripción:</label>
          <textarea id="curso-descripcion" rows="4" required></textarea>
        </div>
        
        <div class="form-group">
          <label for="curso-instructor">Tu nombre (instructor):</label>
          <input type="text" id="curso-instructor" required>
        </div>
        
        <div class="form-group">
          <label for="curso-email">Email de contacto:</label>
          <input type="email" id="curso-email" required>
        </div>
        
        <div class="form-group">
          <label for="curso-imagen">URL de tu foto (instructor):</label>
          <input type="url" id="curso-imagen" placeholder="https://ejemplo.com/tu-foto.jpg" required>
          <small>Ingresa la URL de una imagen tuya (recomendado: 150x150 píxeles)</small>
        </div>
        
        <div class="form-group">
          <label for="curso-imagen-curso">URL de imagen del curso:</label>
          <input type="url" id="curso-imagen-curso" placeholder="https://ejemplo.com/imagen-curso.jpg" required>
          <small>Ingresa la URL de una imagen para tu curso (recomendado: 600x300 píxeles)</small>
        </div>
        
        <div class="form-group">
          <label for="curso-precio">Precio ($):</label>
          <input type="number" id="curso-precio" min="0" step="0.01" required>
        </div>
        
        <div class="form-buttons">
          <button type="button" id="cancelar-curso" class="btn-secundario">Cancelar</button>
          <button type="submit" class="btn-primario">Publicar curso</button>
        </div>
      </form>
    </section>

    <div class="agendar-turno-btn">
      <button class="tema-btn" onclick="window.location='index.html#agenda'">Agendar turno</button>
    </div>
  </main>

  <footer>
    <p>&copy; 2025 EZMoney</p>
  </footer>

  <!-- Script para manejar los cursos de la comunidad -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Referencias a elementos del DOM
      const mostrarFormBtn = document.getElementById('mostrar-form-curso');
      const formCrearCurso = document.getElementById('form-crear-curso');
      const cancelarCursoBtn = document.getElementById('cancelar-curso');
      const nuevoCursoForm = document.getElementById('nuevo-curso-form');
      const cursosComunidadLista = document.getElementById('cursos-comunidad-lista');
      const noCursosMsg = document.getElementById('no-cursos-msg');
      
      // Cargar cursos guardados
      let cursosCripto = JSON.parse(localStorage.getItem('cursosCripto')) || [];
      
      // Mostrar formulario
      mostrarFormBtn.addEventListener('click', function() {
        formCrearCurso.style.display = 'block';
        mostrarFormBtn.style.display = 'none';
      });
      
      // Ocultar formulario
      cancelarCursoBtn.addEventListener('click', function() {
        formCrearCurso.style.display = 'none';
        mostrarFormBtn.style.display = 'block';
        nuevoCursoForm.reset();
      });
      
      // Guardar nuevo curso
      nuevoCursoForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const nuevoCurso = {
          id: Date.now(),
          titulo: document.getElementById('curso-titulo').value,
          descripcion: document.getElementById('curso-descripcion').value,
          instructor: document.getElementById('curso-instructor').value,
          email: document.getElementById('curso-email').value,
          imagen: document.getElementById('curso-imagen').value,
          imagenCurso: document.getElementById('curso-imagen-curso').value,
          precio: parseFloat(document.getElementById('curso-precio').value),
          categoria: 'cripto',
          fecha: new Date().toLocaleDateString()
        };
        
        // Agregar a la lista y guardar
        cursosCripto.push(nuevoCurso);
        localStorage.setItem('cursosCripto', JSON.stringify(cursosCripto));
        
        // Resetear formulario y ocultarlo
        nuevoCursoForm.reset();
        formCrearCurso.style.display = 'none';
        mostrarFormBtn.style.display = 'block';
        
        // Actualizar lista de cursos
        mostrarCursos();
        
        alert('¡Tu curso ha sido publicado con éxito!');
      });
      
      // Función para mostrar cursos
      function mostrarCursos() {
        if (cursosCripto.length === 0) {
          noCursosMsg.style.display = 'block';
          return;
        }
        
        noCursosMsg.style.display = 'none';
        cursosComunidadLista.innerHTML = '';
        
        cursosCripto.forEach(curso => {
          const cursoElement = document.createElement('div');
          cursoElement.className = 'profesor-card curso-comunidad-card';
          cursoElement.innerHTML = `
            <img src="${curso.imagen}" alt="${curso.instructor}" onerror="this.src='fotos/cripto1.jpg'">
            <h3>${curso.instructor}</h3>
            <p>${curso.titulo}</p>
            <p class="curso-precio">$${curso.precio.toFixed(2)}</p>
            <div class="curso-botones">
              <button class="btn-ver-mas" data-id="${curso.id}">Ver detalles</button>
              <button class="btn-eliminar" data-id="${curso.id}">Eliminar</button>
            </div>
          `;
          
          cursosComunidadLista.appendChild(cursoElement);
        });
        
        // Agregar eventos a botones
        document.querySelectorAll('.btn-ver-mas').forEach(btn => {
          btn.addEventListener('click', function() {
            const id = parseInt(this.getAttribute('data-id'));
            const curso = cursosCripto.find(c => c.id === id);
            if (curso) {
              mostrarDetallesCurso(curso);
            }
          });
        });
        
        document.querySelectorAll('.btn-eliminar').forEach(btn => {
          btn.addEventListener('click', function() {
            const id = parseInt(this.getAttribute('data-id'));
            if (confirm('¿Estás seguro de que quieres eliminar este curso?')) {
              eliminarCurso(id);
            }
          });
        });
      }
      
      // Función para eliminar curso
      function eliminarCurso(id) {
        cursosCripto = cursosCripto.filter(curso => curso.id !== id);
        localStorage.setItem('cursosCripto', JSON.stringify(cursosCripto));
        mostrarCursos();
      }
      
      // Función para mostrar detalles del curso
      function mostrarDetallesCurso(curso) {
        // Crear modal para mostrar detalles
        const modal = document.createElement('div');
        modal.className = 'curso-modal';
        modal.innerHTML = `
          <div class="curso-modal-contenido">
            <span class="cerrar-modal">&times;</span>
            <div class="curso-modal-imagen">
              <img src="${curso.imagenCurso}" alt="${curso.titulo}" onerror="this.src='fotos/inicialcripto.jpeg'">
            </div>
            <h2>${curso.titulo}</h2>
            <div class="curso-modal-instructor">
              <img src="${curso.imagen}" alt="${curso.instructor}" onerror="this.src='fotos/cripto1.jpg'">
              <h3>Instructor: ${curso.instructor}</h3>
            </div>
            <p class="curso-modal-descripcion">${curso.descripcion}</p>
            <p class="curso-modal-precio">Precio: $${curso.precio.toFixed(2)}</p>
            <p class="curso-modal-fecha">Publicado: ${curso.fecha}</p>
            <button class="btn-contactar" data-email="${curso.email}">Contactar al instructor</button>
          </div>
        `;
        
        document.body.appendChild(modal);
        
        // Mostrar modal
        setTimeout(() => {
          modal.style.opacity = '1';
        }, 10);
        
        // Cerrar modal
        modal.querySelector('.cerrar-modal').addEventListener('click', function() {
          modal.style.opacity = '0';
          setTimeout(() => {
            document.body.removeChild(modal);
          }, 300);
        });
        
        // Contactar al instructor
        modal.querySelector('.btn-contactar').addEventListener('click', function() {
          const email = this.getAttribute('data-email');
          window.location.href = `mailto:${email}?subject=Interesado en tu curso: ${curso.titulo}`;
        });
      }
      
      // Mostrar cursos al cargar la página
      mostrarCursos();
    });
  </script>
</body>
</html>